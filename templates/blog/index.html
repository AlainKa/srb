{% extends 'base.html' %}




{#
{% block header %}
  <h1>{% block title %}Posts{% endblock %}</h1>
  {% if g.user %}
    <a class="action" href="{{ url_for('blog.create') }}">New</a>
  {% endif %}
{% endblock %}
#}

{% block content %}
<div class="container">
<!-- START ARTICLE FEED -->
<section class="articles">
  <div class="column is-8 is-offset-2">
    <section class="articles">
    {% for post in posts %}

        <!-- START ARTICLE -->
        <div class="card article">
          <div class="card-content">

            <div class="media">
              <!-- petite icone au sommet de l'article pour reconnaître l'auteur. Bonne idée, mais ça va être du boulot... on laisse de côté
              <div class="media-center">
                <img src="https://res.cloudinary.com/ameo/image/upload/v1639144778/typocat_svbspx.png" class="author-image" alt="Placeholder image">
              </div>
              -->

              <div class="media-content has-text-centered">
                <p> {% if g.user['id'] == post['author_id'] %} <a class="action" href="{{ url_for('blog.update', id=post['id']) }}">Edit</a>{% endif %} </p>
                <p class="title article-title">
                  {{ post['title'] }}
                </p>
                <p class="subtitle is-6 article-subtitle">
                  {{ post['username'] }} le {{ post['created'].strftime('%Y-%m-%d') }}
                </p>
              </div>
            </div>

            <div class="content article-body">
                {{ post['body'] }}

                <img src= {{ post['filename'] }} />
            </div>


          </div>
        </div>
      <!-- END ARTICLE -->
    {% endfor %}
    </section>
  </div>
</section>
</div>
{% endblock %}


